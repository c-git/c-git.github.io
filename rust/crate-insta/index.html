
<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://dev.chester.wykies.com/js/theme.min.js" integrity="sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1"></script>
  <link rel="stylesheet" href="https://dev.chester.wykies.com/abridge.css?h=1d8271772a1ed466a51f" />
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="base" content="https://dev.chester.wykies.com" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#333333" />
  <link rel="manifest" href="https://dev.chester.wykies.com/manifest.min.json" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://dev.chester.wykies.com/favicon-180x180.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://dev.chester.wykies.com/favicon-32x32.png" />
  <link rel="alternate" type="application/atom+xml" title="Chester Wyke Atom Feed" href="https://dev.chester.wykies.com/atom.xml" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Crate Insta | Chester Wyke</title>
  <meta name="author" content="Chester Wyke" />
  <meta name="copyright" content="Chester Wyke" />
  <meta name="description" content="Chester Wyke is a software developer by trade and passion. This is his personal site with information about him and his publicly accessible notes on various topics." />
  <link rel="canonical" href="https://dev.chester.wykies.com/rust/crate-insta/" />
  <meta name="keywords" content="Chester, Wyke, Software, Developer, Notes" />
  <meta property="og:url" content="https://dev.chester.wykies.com/rust/crate-insta/" />
  <meta name="twitter:url" content="https://dev.chester.wykies.com/rust/crate-insta/" />
  <meta property="og:description" content="Chester Wyke is a software developer by trade and passion. This is his personal site with information about him and his publicly accessible notes on various topics." />
  <meta name="twitter:description" content="Chester Wyke is a software developer by trade and passion. This is his personal site with information about him and his publicly accessible notes on various topics." />
  <meta property="og:title" content="Crate Insta | Chester Wyke" />
  <meta name="twitter:title" content="Crate Insta | Chester Wyke" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://dev.chester.wykies.com/logo.png" />
  <meta property="og:image" content="https://dev.chester.wykies.com/logo.png" />
  <meta property="og:site_name" content="Chester Wyke" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="2025-04-26" />
  <script defer src="https://dev.chester.wykies.com/js/abridge_nopwa.min.js?h=da86cb0a199b3ccbdff1" integrity="sha384-vIpObQoso10COS540XqkYFIjE+P0OwczzYDnC2D28QZ8O6slixwCc+F1xxYZKvFr"></script>
  <noscript><link rel="stylesheet" href="https://dev.chester.wykies.com/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><big><a href="https://dev.chester.wykies.com" title="Chester Wyke"><img src="https://dev.chester.wykies.com/logo-300x102.png" alt="Logo" width="75" height="32" /> &nbsp; Chester Wyke</a></big></div>
      <div>

        <div>
          <ul><li><a class="s110" href="https://dev.chester.wykies.com/archive/"> Articles </a></li><li><a class="s110" href="https://dev.chester.wykies.com/tags/"> Tags </a></li><i type="reset" id="mode" class="js mode">&#9728;</i></li></ul>
        </div>

        <div>
          <div>
            <form autocomplete=off class="js" name="goSearch" id="searchbox">
              <div class="searchd">
                <input id="searchinput" type="text" placeholder="Search" title="Search" />
                <button type="submit" title="Search" class="si">&#8981;</button>
              </div>
              <div class="results"><div id="suggestions"></div></div>
            </form>
          </div>
        </div>

      </div>
    </nav>
    <hr />
  </header>
  <main>
    <article>
      <h1><a href="https://dev.chester.wykies.com/rust/crate-insta/">Crate Insta</a></h1>

      <span class="s95"> Chester Wyke <span class="rpad"></span> February 02, 2024 <span class="rpad"></span>Updated: April 26, 2025 <span class="rpad"></span> #<a href="https://dev.chester.wykies.com/tags/rust/">Rust</a> </span>

    
        <div class="block">
      <div class="blockdiv">
        <a class="b s150" href="https://dev.chester.wykies.com/tags/rust/">Rust (Series)</a><br>
            <a href="https://dev.chester.wykies.com/rust/conditional-compilation/">Conditional Compilation</a><br>
            <a href="https://dev.chester.wykies.com/rust/install/">Install</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-serde/">Crate Serde</a><br>
            <a href="https://dev.chester.wykies.com/rust/refs/">References</a><br>
            <a href="https://dev.chester.wykies.com/rust/cargo/">Cargo</a><br>
            <a href="https://dev.chester.wykies.com/rust/toolchain/">Toolchain (Nightly)</a><br>
            <a href="https://dev.chester.wykies.com/rust/string-formatting/">String Formatting</a><br>
            <a href="https://dev.chester.wykies.com/rust/time/">Time</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-tokio/">Crate Tokio</a><br>
            <a href="https://dev.chester.wykies.com/rust/publish-crate/">Publish Crate</a><br>
            <a href="https://dev.chester.wykies.com/rust/rustfmt/">rustfmt</a><br>
            <a href="https://dev.chester.wykies.com/rust/scripts/">Single file script</a><br>
            <a href="https://dev.chester.wykies.com/rust/snippets/">Snippets</a><br>
            <a href="https://dev.chester.wykies.com/rust/ci/">CI</a><br>
            <a href="https://dev.chester.wykies.com/rust/pattern-typestate/">Pattern Type State</a><br>
            <a href="https://dev.chester.wykies.com/rust/wasm/">WASM</a><br>
            <a href="https://dev.chester.wykies.com/rust/create-new-crate/">Create New Crate</a><br>
            <a href="https://dev.chester.wykies.com/rust/documentation/">Documentation</a><br>
            <a href="https://dev.chester.wykies.com/rust/json/">JSON</a><br>
            <a href="https://dev.chester.wykies.com/rust/pattern-builder/">Pattern Builder</a><br>
            <a href="https://dev.chester.wykies.com/rust/testing/">Testing</a><br>
            <a href="https://dev.chester.wykies.com/rust/byte-collections/">Working with collections of bytes</a><br>
            <a href="https://dev.chester.wykies.com/rust/thoughts/">Thoughts about rust</a><br>
            <a href="https://dev.chester.wykies.com/rust/areweyet/">Are we yet</a><br>
            <a href="https://dev.chester.wykies.com/rust/std-once/">OnceLock</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-actix/">Crate Actix Web</a><br>
            <a href="https://dev.chester.wykies.com/rust/stack-overflow/">Stack Overflow</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-clap/">Crate Clap</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-poll-promise/">Crate Poll Promise</a><br>
            <a class="scur" href="https://dev.chester.wykies.com/rust/crate-insta/">Crate Insta</a><br> 
          
            <a href="https://dev.chester.wykies.com/rust/tips/">Tips</a><br>
            <a href="https://dev.chester.wykies.com/rust/create-new-egui-project/">Create new egui project</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-csv/">Crate CSV</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-egui/">Crate egui</a><br>
            <a href="https://dev.chester.wykies.com/rust/iterators/">Iterators</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-tracing-subscriber/">Crate Tracing Subscriber</a><br>
            <a href="https://dev.chester.wykies.com/rust/regex/">Regex</a><br>
            <a href="https://dev.chester.wykies.com/rust/vscode/">vscode</a><br>
            <a href="https://dev.chester.wykies.com/rust/enum-conversion/">Enum Conversion</a><br>
            <a href="https://dev.chester.wykies.com/rust/macros/">Macros</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-lettre/">lettre</a><br>
            <a href="https://dev.chester.wykies.com/rust/google-apis/">Google APIs</a><br>
      </div>
    </div>


<p>Source: <a rel="noopener external" target="_blank" href="https://insta.rs/docs/quickstart/">https://insta.rs/docs/quickstart/</a></p>
<h1 id="asserting-in-a-loop"><a class="zola-anchor" href="#asserting-in-a-loop" aria-label="Anchor link for: asserting-in-a-loop">Asserting in a loop</a></h1>
<p>If you are using the assert in a loop you’ll want to use <code>cargo insta test</code> instead of cargo test to get all snapshots created at the same time.</p>
<h1 id="using-rstest-or-test-case"><a class="zola-anchor" href="#using-rstest-or-test-case" aria-label="Anchor link for: using-rstest-or-test-case">Using <a rel="noopener external" target="_blank" href="https://docs.rs/rstest/latest/rstest/">rstest</a> or <a rel="noopener external" target="_blank" href="https://docs.rs/test-case/latest/test_case/">test_case</a></a></h1>
<p>Because these crates use macros to create separate test cases the execution order is not deterministic.
So ensure you set a snapshot name based on something that determines the output for example a string version of the input.
If you’d like the name to be based on the inputs see the <a rel="noopener external" target="_blank" href="https://insta.rs/docs/patterns/#rstest">macro</a> in insta’s docs.</p>
<h1 id="redactions-exclusions"><a class="zola-anchor" href="#redactions-exclusions" aria-label="Anchor link for: redactions-exclusions">Redactions (exclusions)</a></h1>
<p>Source: <a rel="noopener external" target="_blank" href="https://insta.rs/docs/redactions/#selectors">https://insta.rs/docs/redactions/#selectors</a></p>
<p>This is useful if there are parts that change and you do not want to include in your snapshot such as timestamps.</p>
<p>Tip: Use add <code>.*</code> one at a time to see what level you are at.</p>
<h1 id="cleanup-of-unreferenced-snapshots"><a class="zola-anchor" href="#cleanup-of-unreferenced-snapshots" aria-label="Anchor link for: cleanup-of-unreferenced-snapshots">Cleanup of unreferenced snapshots</a></h1>
<p>If files are renamed or tests are renamed then snapshots can become no longer used.
To delete the stale ones you can use the following command.
More info can be found <a rel="noopener external" target="_blank" href="https://insta.rs/docs/cli/#test">here</a>.</p>
<pre class="giallo" style="color: #E1E4E8; background-color: #24292E;"><code data-lang="shellscript"><span class="giallo-l"><span style="color: #B392F0;">cargo</span><span style="color: #9ECBFF;"> insta test</span><span style="color: #79B8FF;"> --unreferenced</span><span style="color: #9ECBFF;"> delete</span></span></code></pre><h1 id="testing-private-functions-and-managing-snap-files"><a class="zola-anchor" href="#testing-private-functions-and-managing-snap-files" aria-label="Anchor link for: testing-private-functions-and-managing-snap-files">Testing private functions (and managing snap files)</a></h1>
<p>There are three ways to decide where to store snapshots.</p>
<ol>
<li><a rel="noopener external" target="_blank" href="https://insta.rs/docs/quickstart/#inline-snapshots">Inline with the code</a>
<ul>
<li>If you call the insta assert functions only once then inline is a available option to consider.</li>
</ul>
</li>
<li>In a folder called snapshots in a folder next to the file with your test.
<ul>
<li>This is the default if you don’t use inline.</li>
</ul>
</li>
<li>Set a desired folder <a rel="noopener external" target="_blank" href="https://docs.rs/insta/latest/insta/struct.Settings.html#method.snapshot_path">using settings</a>.
<ul>
<li>This is my preferred option if the assert must be called multiple times. See example below for how to use this option. Note that there are other ways to change the setting but I just chose this one as I intended to make use of the setting for multiple tests.</li>
</ul>
</li>
</ol>
<pre class="giallo" style="color: #E1E4E8; background-color: #24292E;"><code data-lang="rust"><span class="giallo-l"><span style="color: #F97583;">pub</span><span>(</span><span style="color: #F97583;">crate</span><span>)</span><span style="color: #F97583;"> fn</span><span style="color: #B392F0;"> insta_settings</span><span>()</span><span style="color: #F97583;"> -&gt;</span><span style="color: #B392F0;"> insta</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">Settings</span><span> {</span></span>
<span class="giallo-l"><span style="color: #F97583;">    let mut</span><span> result</span><span style="color: #F97583;"> =</span><span style="color: #B392F0;"> insta</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">Settings</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">clone_current</span><span>();</span></span>
<span class="giallo-l"><span style="color: #F97583;">    let</span><span> cwd</span><span style="color: #F97583;"> =</span><span style="color: #B392F0;"> std</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">env</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">current_dir</span><span>()</span><span style="color: #F97583;">.</span><span style="color: #B392F0;">expect</span><span>(</span><span style="color: #9ECBFF;">&quot;failed to get cwd&quot;</span><span>);</span></span>
<span class="giallo-l"><span style="color: #F97583;">    let</span><span> path</span><span style="color: #F97583;"> =</span><span> cwd</span><span style="color: #F97583;">.</span><span style="color: #B392F0;">join</span><span>(</span><span style="color: #9ECBFF;">&quot;tests&quot;</span><span>)</span><span style="color: #F97583;">.</span><span style="color: #B392F0;">join</span><span>(</span><span style="color: #9ECBFF;">&quot;snapshots&quot;</span><span>);</span></span>
<span class="giallo-l"><span>    result</span><span style="color: #F97583;">.</span><span style="color: #B392F0;">set_snapshot_path</span><span>(path);</span></span>
<span class="giallo-l"><span>    result</span></span>
<span class="giallo-l"><span>}</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #F97583;">fn</span><span style="color: #B392F0;"> test_output</span><span>() {</span></span>
<span class="giallo-l"><span style="color: #F97583;">    let</span><span> actual</span><span style="color: #F97583;"> =</span><span style="color: #9ECBFF;"> &quot;bob&quot;</span></span>
<span class="giallo-l"><span style="color: #B392F0;">    insta_settings</span><span>()</span><span style="color: #F97583;">.</span><span style="color: #B392F0;">bind</span><span>(</span><span style="color: #F97583;">||</span><span style="color: #B392F0;"> insta</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">assert_snapshot!</span><span>(actual));</span></span>
<span class="giallo-l"><span>}</span></span></code></pre><h1 id="supporting-tooling"><a class="zola-anchor" href="#supporting-tooling" aria-label="Anchor link for: supporting-tooling">Supporting Tooling</a></h1>
<p>For the best experience you’ll have to have <a rel="noopener external" target="_blank" href="https://insta.rs/docs/cli/">cargo-insta</a> installed.
You can install it with <code>cargo install cargo-insta</code></p>
<p>If you use vscode you’ll also want to make use of the plugin for insta (see plugin page for more details).
See info for plugin below (from copy command in vscode).
To activate many of the options for the plugin you need to click on the snap file <strong>in the tree view</strong>.</p>
<blockquote>
<p>Name: insta snapshots<br />
Id: mitsuhiko.insta<br />
Description: Syntax support for insta snapshots<br />
Version: 1.0.6<br />
Publisher: Armin Ronacher<br />
VS Marketplace Link: <a rel="noopener external" target="_blank" href="https://marketplace.visualstudio.com/items?itemName=mitsuhiko.insta">https://marketplace.visualstudio.com/items?itemName=mitsuhiko.insta</a></p>
</blockquote>
<h1 id="setting-terminal-size"><a class="zola-anchor" href="#setting-terminal-size" aria-label="Anchor link for: setting-terminal-size">Setting terminal size</a></h1>
<p>Some test like those of the output of a program might be sensitive to the terminal size and in particular the width.
Below is an example script to set the terminal width using crossterm.
Tested on Ubuntu 22.04.1 in the default terminal and it works.
It doesn’t work if the terminal is maximized.
Also doesn’t work in the vscode terminal.</p>
<p>NB: If unfamiliar with cargo scripts more info can be found <a href="https://dev.chester.wykies.com/rust/scripts/">here</a></p>
<pre class="giallo" style="color: #E1E4E8; background-color: #24292E;"><code data-lang="rust"><span class="giallo-l"><span>#</span><span style="color: #F97583;">!/</span><span>usr</span><span style="color: #F97583;">/</span><span>bin</span><span style="color: #F97583;">/</span><span>env</span><span style="color: #F97583;"> -</span><span style="color: #B392F0;">S</span><span> cargo</span><span style="color: #F97583;"> +</span><span>nightly</span><span style="color: #F97583;"> -</span><span style="color: #B392F0;">Zscript</span></span>
<span class="giallo-l"><span>```</span></span>
<span class="giallo-l"><span>[package]</span></span>
<span class="giallo-l"><span>edition</span><span style="color: #F97583;"> =</span><span style="color: #9ECBFF;"> &quot;2021&quot;</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span>[dependencies]</span></span>
<span class="giallo-l"><span>crossterm</span><span style="color: #F97583;"> =</span><span style="color: #9ECBFF;"> &quot;0.27.0&quot;</span></span>
<span class="giallo-l"><span>```</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #F97583;">fn</span><span style="color: #B392F0;"> main</span><span>() {</span></span>
<span class="giallo-l"><span style="color: #B392F0;">    set_terminal_width</span><span>(</span><span style="color: #79B8FF;">100</span><span>);</span></span>
<span class="giallo-l"><span>}</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #6A737D;">/// Designed for use in testing and will panic if unable to set size in under 2 seconds</span></span>
<span class="giallo-l"><span style="color: #F97583;">fn</span><span style="color: #B392F0;"> set_terminal_width</span><span>(desired_width</span><span style="color: #F97583;">:</span><span style="color: #B392F0;"> u16</span><span>) {</span></span>
<span class="giallo-l"><span style="color: #F97583;">    const</span><span style="color: #79B8FF;"> MAX_WAIT_TIME_SEC</span><span style="color: #F97583;">:</span><span style="color: #B392F0;"> u64</span><span style="color: #F97583;"> =</span><span style="color: #79B8FF;"> 2</span><span>;</span></span>
<span class="giallo-l"><span style="color: #F97583;">    let</span><span> (</span><span style="color: #F97583;">mut</span><span> curr_width,</span><span style="color: #F97583;"> mut</span><span> curr_height)</span><span style="color: #F97583;"> =</span><span style="color: #B392F0;"> crossterm</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">terminal</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">size</span><span>()</span><span style="color: #F97583;">.</span><span style="color: #B392F0;">unwrap</span><span>();</span></span>
<span class="giallo-l"><span style="color: #B392F0;">    println!</span><span>(</span><span style="color: #9ECBFF;">&quot;Current terminal size is {curr_width} x {curr_height}&quot;</span><span>);</span></span>
<span class="giallo-l"><span style="color: #F97583;">    if</span><span> curr_width</span><span style="color: #F97583;"> ==</span><span> desired_width {</span></span>
<span class="giallo-l"><span style="color: #6A737D;">        // Nothing required to be done</span></span>
<span class="giallo-l"><span style="color: #B392F0;">        println!</span><span>(</span><span style="color: #9ECBFF;">&quot;Already at desired width of {desired_width}&quot;</span><span>);</span></span>
<span class="giallo-l"><span style="color: #F97583;">        return</span><span>;</span></span>
<span class="giallo-l"><span>    }</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #F97583;">    let</span><span> start_instant</span><span style="color: #F97583;"> =</span><span style="color: #B392F0;"> std</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">time</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">Instant</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">now</span><span>();</span></span>
<span class="giallo-l"><span style="color: #B392F0;">    crossterm</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">execute!</span><span>(</span></span>
<span class="giallo-l"><span style="color: #B392F0;">        std</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">io</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">stdout</span><span>(),</span></span>
<span class="giallo-l"><span style="color: #B392F0;">        crossterm</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">terminal</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">SetSize</span><span>(desired_width, curr_height)</span></span>
<span class="giallo-l"><span>    )</span></span>
<span class="giallo-l"><span style="color: #F97583;">    .</span><span style="color: #B392F0;">unwrap</span><span>();</span></span>
<span class="giallo-l"><span style="color: #F97583;">    while</span><span> curr_width</span><span style="color: #F97583;"> !=</span><span> desired_width {</span></span>
<span class="giallo-l"><span style="color: #F97583;">        if</span><span style="color: #B392F0;"> std</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">time</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">Instant</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">now</span><span>()</span></span>
<span class="giallo-l"><span style="color: #F97583;">            .</span><span style="color: #B392F0;">duration_since</span><span>(start_instant)</span></span>
<span class="giallo-l"><span style="color: #F97583;">            .</span><span style="color: #B392F0;">as_secs</span><span>()</span></span>
<span class="giallo-l"><span>            &gt;</span><span style="color: #79B8FF;"> MAX_WAIT_TIME_SEC</span></span>
<span class="giallo-l"><span>        {</span></span>
<span class="giallo-l"><span style="color: #B392F0;">            panic!</span><span>(</span><span style="color: #9ECBFF;">&quot;failed to change terminal size to width of {desired_width} in under {MAX_WAIT_TIME_SEC} seconds&quot;</span><span>);</span></span>
<span class="giallo-l"><span>        }</span></span>
<span class="giallo-l"><span style="color: #B392F0;">        std</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">thread</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">sleep</span><span>(</span><span style="color: #B392F0;">std</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">time</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">Duration</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">from_millis</span><span>(</span><span style="color: #79B8FF;">1</span><span>));</span></span>
<span class="giallo-l"><span>        (curr_width, curr_height)</span><span style="color: #F97583;"> =</span><span style="color: #B392F0;"> crossterm</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">terminal</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">size</span><span>()</span><span style="color: #F97583;">.</span><span style="color: #B392F0;">unwrap</span><span>();</span></span>
<span class="giallo-l"><span>    }</span></span>
<span class="giallo-l"></span>
<span class="giallo-l"><span style="color: #B392F0;">    println!</span><span>(</span></span>
<span class="giallo-l"><span style="color: #9ECBFF;">        &quot;Successfully changed terminal size to {curr_width} x {curr_height} in {} mills&quot;</span><span>,</span></span>
<span class="giallo-l"><span style="color: #B392F0;">        std</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">time</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">Instant</span><span style="color: #F97583;">::</span><span style="color: #B392F0;">now</span><span>()</span></span>
<span class="giallo-l"><span style="color: #F97583;">            .</span><span style="color: #B392F0;">duration_since</span><span>(start_instant)</span></span>
<span class="giallo-l"><span style="color: #F97583;">            .</span><span style="color: #B392F0;">as_millis</span><span>()</span></span>
<span class="giallo-l"><span>    );</span></span>
<span class="giallo-l"><span>}</span></span></code></pre>
    </article>

    <div class="sblock">
      <div class="blockdiv">
        <a class="b s150" href="https://dev.chester.wykies.com/tags/rust/">Series</a><br>

          
          
      <a href="https://dev.chester.wykies.com/rust/conditional-compilation/">Conditional Compilation</a><br>

          
            <details>
              <summary>More...</summary>
            </details>
            <div class="hidden_li">
                <a href="https://dev.chester.wykies.com/rust/install/">Install</a><br>
                <a href="https://dev.chester.wykies.com/rust/crate-serde/">Crate Serde</a><br>
                <a href="https://dev.chester.wykies.com/rust/refs/">References</a><br>
                <a href="https://dev.chester.wykies.com/rust/cargo/">Cargo</a><br>
                <a href="https://dev.chester.wykies.com/rust/toolchain/">Toolchain (Nightly)</a><br>
                <a href="https://dev.chester.wykies.com/rust/string-formatting/">String Formatting</a><br>
                <a href="https://dev.chester.wykies.com/rust/time/">Time</a><br>
                <a href="https://dev.chester.wykies.com/rust/crate-tokio/">Crate Tokio</a><br>
                <a href="https://dev.chester.wykies.com/rust/publish-crate/">Publish Crate</a><br>
                <a href="https://dev.chester.wykies.com/rust/rustfmt/">rustfmt</a><br>
                <a href="https://dev.chester.wykies.com/rust/scripts/">Single file script</a><br>
                <a href="https://dev.chester.wykies.com/rust/snippets/">Snippets</a><br>
                <a href="https://dev.chester.wykies.com/rust/ci/">CI</a><br>
                <a href="https://dev.chester.wykies.com/rust/pattern-typestate/">Pattern Type State</a><br>
                <a href="https://dev.chester.wykies.com/rust/wasm/">WASM</a><br>
                <a href="https://dev.chester.wykies.com/rust/create-new-crate/">Create New Crate</a><br>
                <a href="https://dev.chester.wykies.com/rust/documentation/">Documentation</a><br>
                <a href="https://dev.chester.wykies.com/rust/json/">JSON</a><br>
                <a href="https://dev.chester.wykies.com/rust/pattern-builder/">Pattern Builder</a><br>
                <a href="https://dev.chester.wykies.com/rust/testing/">Testing</a><br>
                <a href="https://dev.chester.wykies.com/rust/byte-collections/">Working with collections of bytes</a><br>
                <a href="https://dev.chester.wykies.com/rust/thoughts/">Thoughts about rust</a><br>
                <a href="https://dev.chester.wykies.com/rust/areweyet/">Are we yet</a><br>
                <a href="https://dev.chester.wykies.com/rust/std-once/">OnceLock</a><br>
                <a href="https://dev.chester.wykies.com/rust/crate-actix/">Crate Actix Web</a><br>
                <a href="https://dev.chester.wykies.com/rust/stack-overflow/">Stack Overflow</a><br>
            </div>

          

          
            <a href="https://dev.chester.wykies.com/rust/crate-clap/">Crate Clap</a><br>
            <a href="https://dev.chester.wykies.com/rust/crate-poll-promise/">Crate Poll Promise</a><br>

          
            
      <a class="scur" href="https://dev.chester.wykies.com/rust/crate-insta/">Crate Insta</a><br>
    

          
            <a href="https://dev.chester.wykies.com/rust/tips/">Tips</a><br>
          
            <a href="https://dev.chester.wykies.com/rust/create-new-egui-project/">Create new egui project</a><br>
          
            <details>
              <summary>More...</summary>
            </details>
            <div class="hidden_li">
                <a href="https://dev.chester.wykies.com/rust/crate-csv/">Crate CSV</a><br>
                <a href="https://dev.chester.wykies.com/rust/crate-egui/">Crate egui</a><br>
                <a href="https://dev.chester.wykies.com/rust/iterators/">Iterators</a><br>
                <a href="https://dev.chester.wykies.com/rust/crate-tracing-subscriber/">Crate Tracing Subscriber</a><br>
                <a href="https://dev.chester.wykies.com/rust/regex/">Regex</a><br>
                <a href="https://dev.chester.wykies.com/rust/vscode/">vscode</a><br>
                <a href="https://dev.chester.wykies.com/rust/enum-conversion/">Enum Conversion</a><br>
                <a href="https://dev.chester.wykies.com/rust/macros/">Macros</a><br>
                <a href="https://dev.chester.wykies.com/rust/crate-lettre/">lettre</a><br>
            </div>
        
      <a href="https://dev.chester.wykies.com/rust/google-apis/">Google APIs</a><br>

        
      </div>
      <div class="blockdiv sticky">
        <a class="b s150" href="#">Index</a>
        <div>
          <a href="#asserting-in-a-loop">Asserting in a loop</a>
        </div>
        <div>
          <a href="#using-rstest-or-test-case">Using rstest or test_case</a>
        </div>
        <div>
          <a href="#redactions-exclusions">Redactions (exclusions)</a>
        </div>
        <div>
          <a href="#cleanup-of-unreferenced-snapshots">Cleanup of unreferenced snapshots</a>
        </div>
        <div>
          <a href="#testing-private-functions-and-managing-snap-files">Testing private functions (and managing snap files)</a>
        </div>
        <div>
          <a href="#supporting-tooling">Supporting Tooling</a>
        </div>
        <div>
          <a href="#setting-terminal-size">Setting terminal size</a>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <hr />
    <div class="c">
      <nav class="tpad"><div><a type="application/atom+xml" href="https://dev.chester.wykies.com/atom.xml" target="_blank" title="Chester Wyke Atom Feed"><i type="Button" class="svg rss" title="Chester Wyke Atom Feed"></i></a><a href="https://www.linkedin.com/in/cwyke/" target="_blank" title="LinkedIn"><i type="Button" class="svg linkedin" title="LinkedIn"></i></a><a href="https://github.com/c-git/" target="_blank" title="Github"><i type="Button" class="svg github" title="Github"></i></a></div></nav>
      <nav class="vpad">
        <a class="rpad s90" href="https://dev.chester.wykies.com/site-definitions/"> Definitions </a>
        <a class="rpad s90" href="https://dev.chester.wykies.com/privacy/"> Privacy </a>
        <a class="rpad s90" href="https://dev.chester.wykies.com/sitemap.xml" target="_blank"> Sitemap </a>
      </nav><a href="https://github.com/c-git/c-git.github.io/edit/main/content/rust&#x2F;crate_insta.md" target="_blank">Edit this page on GitHub</a>
          
      <p class="s80"> © 2022-<span id="year">2026</span> Chester Wyke</p>
      <p class="s80">Powered by <a href="https://www.getzola.org/" target="_blank">Zola</a> & <a href="https://github.com/jieiku/abridge/" target="_blank">Abridge</a></p>
    </div>
  </footer><span class="topout">
<span class="topleft"> </span><a href="#" class="top" title="Back to Top">&cuwed;</a>
</span>
</body>
</html>
